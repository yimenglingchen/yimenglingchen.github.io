---

layout: post

title:  设计模式之适配器模式

tag: 设计模式

---
# 设计模式之适配器模式



---

## 1 适配器模式定义

```
将一个类的接口转换成客户希望的另外一个接口。适配器模式使得原本由于接口不兼容而不能一起工作的那些类可以一起工作。
```

---

## 2 程序示例

定义适配器接口

```java
/**
 * 定义适配器的接口，供客户端使用
 */
public interface Target {
    /**
     * 示意方法，客户端请求处理的方法
     */
    public void request();
}
```

定义需要被适配的对象接口

```java
/**
 * 已经存在的接口，这个接口需要被适配
 */
public class Adaptee {
    /**
     * 示意方法，原本已经存在，已经实现的方法
     */
    public void specificRequest() {
        //具体的功能处理
        System.out.println("具体的功能处理");
    }
}
```

适配器对象实现

```java
/**
 * 适配器
 */
public class Adapter implements Target {
    /**
     * 持有需要被适配的接口对象
     */
    private Adaptee adaptee;

    /**
     * 构造方法，传入需要被适配的对象
     * @param adaptee 需要被适配的对象
     */
    public Adapter(Adaptee adaptee) {
        this.adaptee = adaptee;
    }

    @Override
    public void request() {
        adaptee.specificRequest();
    }
}
```

主程序调用适配器

```java
public class Main {
    public static void main(String[] args) {
        //创建需要被适配的对象
        Adaptee adaptee = new Adaptee();
        //创建客户需要调用的接口对象
        Target target = new Adapter(adaptee);
        target.request();
    }
}
```

---

## 3 适配器模式讲解

### 3.1 适配器模式的功能

适配器模式的主要功能是转换匹配，目的是复用已有的功能，而不是实现新的接口。

适配器里同样可以实现功能，这种适配器被称作智能适配器。而且，在进行适配时，很有可能需要实现一定的操作才能转换过来。

除了上述的对象适配器，还存在类适配器，具体的实现方式是：写一个适配器类，让适配器类去继承实现，然后再去适配新的接口。

### 3.2 适配器模式的接口关联

适配器的接口和被适配的接口的参数是可以不一致的，通过适配来进行匹配。

适配器也可以实现双向的适配，可以同时当作新旧两个接口来进行使用。

### 3.3 适配器模式的优缺点

适配器模式的优点：更好的复用性，更好的可扩展性。

适配器模式的缺点：过多的使用适配器，会导致结构凌乱。

### 3.4 适配器模式的本质

适配器模式的本质：转换匹配，复用功能。

适配器通过转换调用已有的实现，从而能把已有的实现匹配成需要的接口，使之能满足客户端的需要。也就是说转换匹配是手段，而服用已有的功能才是目的。

在进行转换匹配的过程中，适配器还可以在转换调用的前后实现一些功能处理，也就是实现智能的适配。

### 3.5 何时采用外观模式

1.如果想要使用一个已经存在的类，但是它的接口不符合你的需求，这种情况可以使用适配器模式，来把已有的实现转换成你需要的接口。

2.如果想创建一个可以复用的类，这个类可能和一些不兼容的类一起工作，这种情况可以使用适配器模式，到时候需要什么就适配什么。

3.如果想使用一些已经存在的子类，但不可能对每一个子类都进行适配，这种情况可以选用对象适配器，直接适配这些子类的父类就可以了。
        

