---

layout: post

title:  sql深入研究(1)

tag: sql

---

# sql深入研究(1)

---

## 1 case表达式

### 1 case表达式的基础用法

1.简单case表达式

```
CASE address 
    WHEN '北京' THEN 'beijing'
    WHEN '上海' THEN 'shanghai'
    ELSE '其它' END
```

2.搜索case表达式

```
CASE 
    WHEN address = '北京' THEN 'beijing'
    WHEN address = '上海' THEN 'shanghai'
    ELSE '其它' END
```

### 2 case注意事项

#### 1.统一各分支返回的数据类型

只有各分支返回的数据类型都一致，才能确保sql的准确性，如果不一致那就会出现类型不一致的报错问题。

#### 2.在语句结尾要加END

这个是语法问题，case后必须加END标记，否则语句报错。

#### 3.ELSE语句尽可能不要省略

ELSE语句即使不写也不会报错，但是为了便于问题排查，尽量不要省略ELSE语句，如果没有返回值那就返回空。

